---
import Layout from '../layouts/Layout.astro';
import { DashboardView } from '../features/dashboard/components/DashboardView';
import { Toaster } from '../components/ui/sonner';

const { data: { user }, error } = await Astro.locals.supabase.auth.getUser();

if (!user || error) {
  return Astro.redirect('/auth');
}
---

<Layout title="Dashboard - Language Cards">
  <DashboardView client:load userEmail={user.email!} />
  <Toaster client:load />
</Layout>
