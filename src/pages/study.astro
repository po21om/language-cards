---
import Layout from '../layouts/Layout.astro';
import { StudyView } from '../features/study/components/StudyView';
import { Toaster } from '../components/ui/sonner';

const { data: { user }, error } = await Astro.locals.supabase.auth.getUser();

if (!user || error) {
  return Astro.redirect('/auth');
}

export const prerender = false;
---

<Layout title="Study Session - Language Cards">
  <StudyView client:load userEmail={user.email!} />
  <Toaster client:load />
</Layout>
