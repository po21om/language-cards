---
import Layout from '../layouts/Layout.astro';
import { SettingsView } from '../features/settings/components/SettingsView';
import { Toaster } from '../components/ui/sonner';

const { data: { user }, error } = await Astro.locals.supabase.auth.getUser();

if (!user || error) {
  return Astro.redirect('/auth');
}
---

<Layout title="Settings - Language Cards">
  <SettingsView client:load userEmail={user.email!} />
  <Toaster client:load />
</Layout>
